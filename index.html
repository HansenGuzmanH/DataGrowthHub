<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hansen Data Growth Hub | Análisis de Datos Cinematográfico</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Montserrat:wght@900&display=swap" rel="stylesheet">

    <!-- Librerías JS (en el head para asegurar la carga) -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/d3-sankey@0.12.3/dist/d3-sankey.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
    
    <style>
        :root {
            --color-background: #222831; 
            --color-text: #f0f0f0;
            --color-primary: #14b8a6; /* Teal vibrante */
            --color-secondary: #d946ef; /* Magenta/Púrpura neón */
            --font-title: 'Montserrat', sans-serif;
            --font-body: 'Inter', sans-serif;
            --menu-width: 50vw;
            --menu-max-width: 600px;
            --header-height: 70px; /* Ligeramente más bajo para el nuevo estilo */
            --corner-radius: 15px;
            --color-border: rgba(255, 255, 255, 0.1); /* Añadido para el efecto de cristal */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: auto; }
        body {
            font-family: var(--font-title);
            background-color: var(--color-background);
            color: var(--color-text);
            overflow-x: hidden;
        }

        /* ----- Header y Menú Lateral (ACTUALIZADO) ----- */
        .main-header {
            /* Efecto Flotante y Centrado */
            position: fixed;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 1800px; /* Límite para pantallas muy grandes */
            border-radius: var(--corner-radius);
            
            /* Efecto de Cristal o "Glassmorphism" */
            background-color: rgba(26, 29, 35, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px); /* Compatibilidad con Safari */
            border: 1px solid var(--color-border);
            
            /* Estilos funcionales conservados */
            height: var(--header-height);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2.5%;
            z-index: 1000;
            transition: top 0.3s ease, background-color 0.3s ease; /* Transición suave */
        }
        
        .header-section {
            flex: 1;
            display: flex;
            align-items: center;
        }
        .header-section.left { justify-content: flex-start; }
        .header-section.center { justify-content: center; }
        .header-section.right { justify-content: flex-end; }
        
        .logo { 
            font-size: 1.6rem; 
            text-decoration: none; 
            font-weight: 900; 
            font-family: var(--font-title);
            white-space: nowrap;
        }
        
        .animated-gradient-text {
            background: linear-gradient(90deg, #EEEEEE, #00ADB5, #EEEEEE);
            background-size: 200% auto;
            color: #fff;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient-flow 4s ease infinite;
        }


        @keyframes gradient-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .linkedin-icon { color: white; transition: color 0.3s ease, transform 0.3s ease; }
        .linkedin-icon:hover { color: var(--color-primary); transform: scale(1.1); }
        .linkedin-icon svg { width: 32px; height: 32px; }
        
        .header-icon {
            height: 55px; /* Ajustado para el nuevo header */
            width: 55px; /* Ajustado para el nuevo header */
            border-radius: 50%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        .header-icon:hover {
            transform: scale(1.1);
        }

        .menu-trigger { 
            background: none; 
            border: none; 
            cursor: pointer; 
            z-index: 1002; 
            padding: 10px;
            transition: transform 0.3s ease;
        }
        .menu-trigger:hover {
            transform: scale(1.1);
        }

        .hamburger-icon { width: 34px; height: 28px; display: flex; flex-direction: column; justify-content: space-between; }
        .line { width: 100%; height: 3px; background-color: white; transition: all 0.3s ease-in-out; }
        .menu-trigger.is-active .line-1 { transform: rotate(45deg) translate(8px, 8px); }
        .menu-trigger.is-active .line-2 { opacity: 0; }
        .menu-trigger.is-active .line-3 { transform: rotate(-45deg) translate(8px, -8px); }
        
        .menu-overlay { 
            position: fixed; top: 0; left: 0; 
            width: min(var(--menu-width), var(--menu-max-width)); 
            height: 100%; 
            background-color: rgba(34, 40, 49, 0.9);
            backdrop-filter: blur(20px); 
            z-index: 1001; 
            display: flex; flex-direction: column; justify-content: center;
            transform: translateX(-100%); visibility: hidden; 
            transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1), visibility 0.6s; 
        }
        .menu-overlay.is-open { transform: translateX(0); visibility: visible; }
        .menu-close-btn { position: absolute; top: 1.5rem; right: 5%; background: none; border: none; cursor: pointer; color: white; padding: 10px; transition: transform 0.4s ease; }
        .menu-close-btn:hover { transform: rotate(90deg); color: var(--color-primary); }
        .menu-close-btn svg { width: 32px; height: 32px; }
        .overlay-nav {
            list-style: none;
            text-align: left;
            padding-left: 10%;
            width: 100%;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start; 
            padding-top: 20vh;
        }
        .overlay-nav li { margin: 1.2rem 0; transform: translateX(-20px); opacity: 0; transition: transform 0.4s ease, opacity 0.4s ease; }
        .menu-overlay.is-open .overlay-nav li { transform: translateX(0); opacity: 1; }
        .menu-overlay.is-open .overlay-nav li:nth-child(1) { transition-delay: 0.15s; }
        .menu-overlay.is-open .overlay-nav li:nth-child(2) { transition-delay: 0.20s; }
        .menu-overlay.is-open .overlay-nav li:nth-child(3) { transition-delay: 0.25s; }
        .menu-overlay.is-open .overlay-nav li:nth-child(4) { transition-delay: 0.30s; }
        .overlay-nav a {
            color: white;
            text-decoration: none;
            font-size: clamp(1.4rem, 3.5vw, 1.8rem);
            font-family: var(--font-title);
            font-weight: 700;
            text-transform: uppercase;
            transition: color 0.3s ease;
            overflow-wrap: break-word;
        }
        .overlay-nav a:hover { color: var(--color-primary); }
        
        .menu-footer-icon {
            padding: 2rem 0;
            align-self: center;
            text-align: center;
            width: 100%;
        }
        .menu-footer-icon .linkedin-icon svg {
            width: 48px;
            height: 48px;
        }

        /* ----- Contenido Principal y Secciones ----- */
        main { 
            /* Se elimina el padding top del header, ya que el sequence-container lo manejará */
        }
        h1, h2, h3, h4, h5, h6 { 
            font-family: var(--font-title); 
            text-transform: uppercase; 
            color: var(--color-text);
        }
        
        .sequence-container { 
            height: 200vh;
            position: relative;
        }
        .sticky-element { 
            position: sticky; 
            top: 0; 
            height: 100vh; 
            width: 100%; 
            overflow: hidden; 
            background-color: var(--color-background);
        }
        .sequence-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        
        .background-image { 
            background: radial-gradient(ellipse at center, #393E46, #222831);
            position: relative;
            overflow: hidden; 
        }
        
        .background-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(
                110deg, 
                transparent 40%, 
                rgba(255, 255, 255, 0.15) 50%, 
                transparent 60%
            );
            background-size: 200% 100%;
            background-repeat: no-repeat;
            animation: shine-effect 5s infinite linear;
        }

        @keyframes shine-effect {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        .knockout-text-layer { 
            background-color: black; 
            mix-blend-mode: screen; 
            display: flex; 
            flex-direction: column; 
            justify-content: flex-start;
            align-items: center; 
            padding-top: calc(var(--header-height) + 30px); /* Ajuste para el header flotante */
        }

        .title-container {
            text-align: left;
        }

        .title-container .top-row {
            display: flex;
            align-items: flex-end;
        }
        
        .title-container h1 {
            font-size: 15vw;
            line-height: 0.9;
            color: white; 
        }

        .growth-arrow {
            width: 30vw;
            height: 20vw;
            margin-left: 2vw;
            opacity: 0.75;
        }
        .growth-arrow path {
            stroke: #FF2E63;
            stroke-width: 12;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
        }
        
        .machine-learning-section {
            padding: 5vh 5%;
            background-color: var(--color-background);
            position: relative;
            z-index: 2;
        }

        .machine-learning-section h2 {
            text-align: center;
            font-size: clamp(3rem, 8vw, 6rem); 
            margin-bottom: 5rem; 
        }

        .ml-content-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3rem;
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }
        .ml-image {
            flex: 0.8;
            max-width: 450px;
        }
        .ml-image img {
            width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .ml-text {
            flex: 2;
            text-align: left;
            font-family: var(--font-body);
            font-size: clamp(1.1rem, 1.5vw, 1.3rem);
            line-height: 1.8;
            color: #e0e0e0;
        }
        .ml-text p {
            margin-bottom: 1em;
        }
        .ml-text strong {
            color: var(--color-primary);
            font-weight: 700;
        }
        .ml-text ol {
            padding-left: 25px;
            margin-bottom: 1em;
        }
        .ml-text ol li {
            margin-bottom: 0.75em;
        }
        
        .gallery-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .gallery-header {
            max-width: 900px;
            margin: 0 auto 2rem auto;
            padding: 0 2rem;
            text-align: center;
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 3rem;
        }
        .gallery-header p {
            font-family: var(--font-body);
            font-size: 1.1rem;
            color: #b0b0b0;
            line-height: 1.7;
            text-transform: none;
        }
        
        .gallery-main-image {
            width: 100%;
            height: 600px;
            margin-bottom: 1rem;
            background-color: #2a3038;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
        }

        .gallery-main-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: opacity 0.4s ease-in-out;
        }

        .gallery-thumbnails {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1rem;
        }

        .gallery-thumbnail {
            width: 100%;
            aspect-ratio: 16 / 10;
            border-radius: 8px;
            cursor: pointer;
            overflow: hidden;
            border: 3px solid transparent;
            transition: border-color 0.3s ease, transform 0.3s ease, opacity 0.3s ease;
            opacity: 0.6;
        }
        
        .gallery-thumbnail:hover {
            transform: scale(1.05);
            opacity: 1;
        }

        .gallery-thumbnail.active {
            border-color: var(--color-primary);
            opacity: 1;
        }

        .gallery-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .bi-text-container {
            font-family: var(--font-body);
            text-align: left;
            max-width: 800px;
            margin: 4rem auto 4rem auto;
            color: #e0e0e0;
            line-height: 1.8;
            padding: 0 4rem;
        }
        
        .bi-text-container p {
            font-family: var(--font-body);
            font-weight: 400;
            font-size: 1.15rem;
            color: #e0e0e0;
            line-height: 1.9;
            margin-bottom: 1.5rem;
            text-transform: none;
        }
        .bi-text-container p strong {
            color: var(--color-secondary);
        }
        
        .global-scroll-indicator {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 28px; height: 48px;
            border: 2px solid white;
            border-radius: 14px;
            z-index: 998;
            opacity: 1;
            transition: opacity 0.4s ease;
        }
        .global-scroll-indicator.hidden { opacity: 0; pointer-events: none; }
        .global-scroll-indicator::before { content: ''; position: absolute; top: 8px; left: 50%; transform: translateX(-50%); width: 4px; height: 10px; background: white; border-radius: 2px; animation: scroll-animation 2.2s infinite cubic-bezier(0.68, -0.55, 0.27, 1.55); }
        @keyframes scroll-animation { 0% { transform: translate(-50%, 0); opacity: 0; } 40% { opacity: 1; } 80% { transform: translate(-50%, 20px); opacity: 0; } 100% { opacity: 0; } }
        
        .outro-section { 
            padding: 8vh 5%;
            text-align: center; 
            background-color: var(--color-background); 
            position: relative; 
            z-index: 5; 
        }
        .outro-section h2 { 
            font-size: clamp(2.5rem, 8vw, 6rem); 
            margin-bottom: 3rem; 
        }
        
        .features-section { padding: 15vh 5%; background-color: #1a1f26; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; max-width: 1800px; margin: 0 auto; }
        .feature-card { position: relative; overflow: hidden; border-radius: 12px; aspect-ratio: 4 / 5; transform: translateY(50px); opacity: 0; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
        .feature-card img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s cubic-bezier(0.165, 0.84, 0.44, 1); }
        .feature-card:hover img { transform: scale(1.05); }
        .feature-card h3 { position: absolute; bottom: 0; left: 0; width: 100%; padding: 1.5rem; font-size: clamp(1.2rem, 3vw, 1.8rem); text-align: left; color: white; background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%); z-index: 2; transition: color 0.3s ease; }
        .feature-card:hover h3 { color: var(--color-primary); }

        .final-chart-section { padding: 10vh 2%; background-color: #12161a; font-family: var(--font-body); }
        .final-chart-section .chart-container, .final-chart-section .main-content-wrapper { background-color: transparent; padding: 20px; border-radius: 10px; width: 95%; max-width: 1500px; box-sizing: border-box; margin: 0 auto 5rem auto; }
        .final-chart-section svg { background-color: transparent; display: block; margin: auto; }
        .sankey-link { fill: none; stroke: rgba(238, 238, 238, 0.4); stroke-opacity: 0.6; }
        .sankey-link:hover { stroke-opacity: 1; }
        .sankey-node rect.node-rect-main { stroke-width: 0.5px; shape-rendering: crispEdges; rx: 4; ry: 4; }
        .node-name-label { font-size: 15px; fill: #FFFFFF; font-weight: bold; }
        .node-value-label { font-size: 13px; font-weight: bold; text-anchor: middle; pointer-events: none; fill: white; }
        .chart-title-main { text-align: center; font-size: 2.5em; margin-bottom: 25px; }
        .legend-item text { font-size: 16px; font-weight: bold; fill: #FFFFFF; dominant-baseline: middle; }
        .main-content-wrapper { width: 100%; max-width: 100%; margin: 0 auto; overflow-x: auto; position: relative; }
        .timeline-container-custom { display: grid; grid-template-columns: repeat(10, minmax(65px, auto)); column-gap: 18px; position: relative; padding: 50px 0; margin: 0 auto; justify-content: center; }
        .timeline-stage-item { display: flex; flex-direction: column; align-items: center; }
        .timeline-number-custom { width: 3rem; height: 3rem; background-color: #1a2035; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 1rem; color: #f0f0f0; margin-bottom: 0.5rem; font-family: var(--font-body); }
        .timeline-category-custom { font-family: var(--font-body); color: white; }

        /* Estilos para Responsividad en Móviles */
        @media (max-width: 768px) {
            :root {
                --header-height: 60px;
            }

            /* ***** INICIO CAMBIOS: Ajuste de espaciado en móvil ***** */
            .sequence-container {
                height: 100vh; 
            }
            .machine-learning-section {
                padding-top: 0; /* Espacio eliminado */
            }
             /* ***** FIN CAMBIOS ***** */
            
            .ml-content-wrapper { flex-direction: column; gap: 2rem; }
            .knockout-text-layer { padding-top: calc(8vh + 30px); } /* Ajuste para header flotante */
            .logo { font-size: 1.2rem; }
            
            .header-controls {
                gap: 0.5rem;
            }
            .linkedin-icon {
                display: flex;
            }
            .linkedin-icon svg {
                width: 28px;
                height: 28px;
            }
            .header-icon {
                width: 50px; /* Ajustado para el nuevo header */
                height: 50px; /* Ajustado para el nuevo header */
            }
            .hamburger-icon {
                width: 28px;
                height: 22px;
            }

            .title-container h1 { font-size: 20vw; }
            .growth-arrow { width: 25vw; height: 20vw; }
            .outro-section { padding: 5vh 5%; }
            .outro-section h2 { font-size: clamp(2rem, 10vw, 3.5rem); }

            .features-section { padding: 10vh 5%; }
            .final-chart-section { padding: 8vh 2%; }
            .chart-title-main { font-size: 1.8em; margin-bottom: 15px; }
            .legend-item text { font-size: 12px; }
            .main-content-wrapper { padding-bottom: 20px; }
            .timeline-container-custom { grid-template-columns: repeat(10, minmax(60px, auto)); width: fit-content; padding: 30px 15px; }
            
            .gallery-main-image { height: 400px; }
            .gallery-thumbnails { grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); }
            .bi-text-container { padding: 0 1.5rem; }
            .bi-text-container p { font-size: 1rem; }
        }

        @media (max-width: 480px) {
            .overlay-nav a { font-size: clamp(1.5rem, 8vw, 2.2rem); }
            :root { --menu-width: 80vw; --menu-max-width: 320px; }
            .gallery-main-image { height: 250px; }
            .header-icon { width: 45px; height: 45px; }
            .linkedin-icon svg { width: 24px; height: 24px; }
        }

    </style>
</head>
<body id="page-top">

<!-- Contenedor principal de la página -->
<div class="page-wrapper">
    <!-- Encabezado principal, fijo en la parte superior -->
    <header class="main-header">
        <div class="header-section left">
            <div class="header-controls">
                <!-- Botón para abrir el menú lateral (hamburguesa) -->
                <button class="menu-trigger" aria-label="Abrir menú">
                    <div class="hamburger-icon">
                        <div class="line line-1"></div>
                        <div class="line line-2"></div>
                        <div class="line line-3"></div>
                    </div>
                </button>
                <!-- Icono de LinkedIn en el encabezado -->
                <a href="https://www.linkedin.com/in/hansen-guzm%C3%A1n-hern%C3%A1ndez-b4185592/" target="_blank" rel="noopener noreferrer" class="linkedin-icon" aria-label="LinkedIn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                </a>
            </div>
        </div>
        <div class="header-section center">
            <a href="#page-top" class="logo animated-gradient-text">Data Growth Hub</a>
        </div>
        <div class="header-section right">
           <a href="#page-top" class="top-link" aria-label="Ir al inicio de la página">
               <img src="https://i.imgur.com/ENnbjaQ.jpeg" alt="Icono de Hansen" class="header-icon" onerror="this.onerror=null;this.src='https://placehold.co/95x95/222831/eeeeee?text=Icono';">
           </a>
        </div>
    </header>
    
    <!-- Menú lateral desplegable -->
    <div class="menu-overlay">
        <!-- Botón para cerrar el menú -->
        <button class="menu-close-btn" aria-label="Cerrar menú">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
        <!-- Menú lateral actualizado -->
        <ul class="overlay-nav">
            <li><a href="#page-top" class="menu-link">Inicio</a></li>
            <li><a href="#machine-learning" class="menu-link">Machine Learning</a></li>
            <li><a href="#evolucion" class="menu-link">Business intelligence</a></li>
            <li><a href="#galeria-bi" class="menu-link">GRÁFICOS</a></li>
        </ul>
        <!-- Icono de LinkedIn en el pie del menú -->
        <div class="menu-footer-icon">
            <a href="https://www.linkedin.com/in/hansen-guzm%C3%A1n-hern%C3%A1ndez-b4185592/" target="_blank" rel="noopener noreferrer" class="linkedin-icon" aria-label="LinkedIn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
            </a>
        </div>
    </div>

    <!-- Contenido principal de la página -->
    <main class="main-content">
        <!-- Contenedor para la animación de scroll principal -->
        <div class="sequence-container">
            <div class="sticky-element">
                <!-- Capa de fondo con imagen -->
                <div class="sequence-layer background-image"></div>
                <!-- Capa de texto que se recorta sobre el fondo -->
                <div class="sequence-layer knockout-text-layer">
                    <div class="title-container">
                        <div class="top-row">
                            <h1>DATA</h1>
                            <svg class="growth-arrow" viewBox="0 0 120 100">
                                <path d="M10 85 L 40 55 L 60 75 L 90 45 L 115 45 M105 35 L 115 45 L 105 55" />
                            </svg>
                        </div>
                        <h1>GROWTH</h1>
                    </div>
                </div>
            </div>
        </div>

        <section id="machine-learning" class="machine-learning-section">
            <h2 class="animated-gradient-text">Machine Learning</h2>
             <div class="ml-content-wrapper">
                <div class="ml-image">
                    <img src="https://i.imgur.com/E2LaKrp.png" alt="Ilustración de Machine Learning con nodos y conexiones cerebrales." onerror="this.onerror=null;this.src='https://placehold.co/450x450/222831/eeeeee?text=Imagen+ML';">
                </div>
                <div class="ml-text">
                    <p>El&nbsp;<strong>Machine Learning</strong>&nbsp;convierte los datos históricos y los resultados pasados de tu empresa en una guía para el futuro.</p>
                    <p>Lo hace en dos pasos:</p>
                    <ol>
                        <li>Aprende las reglas ocultas de cómo funciona realmente tu negocio.</li>
                        <li>Usa esas reglas para predecir lo que pasará y ayudarte a tomar mejores decisiones hoy.</li>
                    </ol>
                    <p><strong>Ejemplo:</strong><br>
                    Precios dinámicos en una tienda online.<br>
                    El sistema analiza el historial de ventas y&nbsp;<strong>aprende</strong>&nbsp;que un producto se vende más caro y rápido los viernes por la noche. El próximo viernes, el sistema automáticamente&nbsp;<strong>actúa</strong>&nbsp;y sube el precio, maximizando la ganancia de forma inteligente.</p>
                </div>
            </div>
        </section>

        <!-- Sección de Business Intelligence rediseñada -->
        <section id="evolucion" class="outro-section">
            <h2 class="animated-gradient-text">Business intelligence (BI)</h2>
            
            <div class="bi-text-container">
                <p>Imagina que diriges tu empresa como si condujeras un coche. Business Intelligence (BI) sería el tablero de control. No es el motor que genera el movimiento, pero te proporciona toda la información vital; velocidad, combustible, estado del motor. Todo para tomar decisiones inteligentes al volante.</p>
                <p>De la misma forma, el BI convierte los datos brutos de ventas, marketing y operaciones en informes claros que te muestran exactamente qué ha funcionado y por qué, permitiéndote dirigir tu negocio basándote en hechos concretos y no en  intuiciones.</p>
            </div>

            <div id="galeria-bi" class="gallery-container">
                <div class="gallery-header">
                    <p>Estas imágenes son una pequeña muestra de mi trabajo en Business Intelligence (BI), son datos de muestra pero muestran un poco de mi visión analítica y creativa.</p>
                </div>
                <div class="gallery-main-image">
                    <img id="main-gallery-image" src="https://i.imgur.com/of09hLT.png" alt="Dashboard de datos principal">
                </div>
                <div class="gallery-thumbnails">
                    <div class="gallery-thumbnail active"><img src="https://i.imgur.com/of09hLT.png" alt="Dashboard de datos 1" onerror="this.onerror=null;this.src='https://placehold.co/120x80/222831/eeeeee?text=Img+1';"></div>
                    <div class="gallery-thumbnail"><img src="https://i.imgur.com/DAtDSY9.png" alt="Dashboard de datos 2" onerror="this.onerror=null;this.src='https://placehold.co/120x80/222831/eeeeee?text=Img+2';"></div>
                    <div class="gallery-thumbnail"><img src="https://i.imgur.com/rfbwGZf.png" alt="Dashboard de datos 3" onerror="this.onerror=null;this.src='https://placehold.co/120x80/222831/eeeeee?text=Img+3';"></div>
                    <div class="gallery-thumbnail"><img src="https://i.imgur.com/o9wEf6l.png" alt="Dashboard de datos 4" onerror="this.onerror=null;this.src='https://placehold.co/120x80/222831/eeeeee?text=Img+4';"></div>
                    <div class="gallery-thumbnail"><img src="https://i.imgur.com/Mm7fy4D.png" alt="Dashboard de datos 5" onerror="this.onerror=null;this.src='https://placehold.co/120x80/222831/eeeeee?text=Img+5';"></div>
                    <div class="gallery-thumbnail"><img src="https://i.imgur.com/JmVH4fo.png" alt="Dashboard de datos 6" onerror="this.onerror=null;this.src='https://placehold.co/120x80/222831/eeeeee?text=Img+6';"></div>
                    <div class="gallery-thumbnail"><img src="https://i.imgur.com/PfbRypg.png" alt="Dashboard de datos 7" onerror="this.onerror=null;this.src='https://placehold.co/120x80/222831/eeeeee?text=Img+7';"></div>
                    <div class="gallery-thumbnail"><img src="https://i.imgur.com/O9sepwB.png" alt="Dashboard de datos 8" onerror="this.onerror=null;this.src='https://placehold.co/120x80/222831/eeeeee?text=Img+8';"></div>
                </div>
            </div>
            
        </section>
        
        <!-- Sección de características eliminada y reemplazada por la sección Sankey -->
        <section id="graficos" class="final-chart-section">
            <div class="chart-container">
                <h2 class="chart-title-main">Actual Sales vs. Forecasted Sales</h2>
                <svg id="alluvialChart"></svg>
            </div>
        </section>
    </main>
    <!-- Indicador de scroll global -->
    <div class="global-scroll-indicator"></div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializa Lenis para un scroll suave
            const lenis = new Lenis();
            function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
            requestAnimationFrame(raf);

            // Integra GSAP con Lenis
            gsap.registerPlugin(ScrollTrigger);
            lenis.on('scroll', ScrollTrigger.update);
            gsap.ticker.add((time) => { lenis.raf(time * 1000) });
            gsap.ticker.lagSmoothing(0);

            // --- LÓGICA DEL MENÚ LATERAL ---
            const menuTrigger = document.querySelector('.menu-trigger');
            const menuOverlay = document.querySelector('.menu-overlay');
            const menuCloseBtn = document.querySelector('.menu-close-btn');
            function toggleMenu() {
                const isActive = document.body.classList.toggle('menu-is-open');
                menuOverlay.classList.toggle('is-open');
                menuTrigger.classList.toggle('is-active');
                if (isActive) { lenis.stop(); } else { lenis.start(); }
            }
            if (menuTrigger) menuTrigger.addEventListener('click', toggleMenu);
            if (menuCloseBtn) menuCloseBtn.addEventListener('click', toggleMenu);
            document.querySelectorAll('.menu-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (menuOverlay.classList.contains('is-open')) { toggleMenu(); }
                    
                    setTimeout(() => { 
                        const targetId = link.getAttribute('href');
                        if (targetId === '#page-top') {
                            lenis.scrollTo(0, { duration: 1.5 });
                        } else {
                            lenis.scrollTo(targetId, { offset: -80 });
                        }
                    }, 600); 
                });
            });

            // --- LÓGICA DEL ENLACE DEL ICONO SUPERIOR ---
            document.querySelector('.top-link').addEventListener('click', (e) => {
                e.preventDefault();
                lenis.scrollTo(0, { duration: 1.5, easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)) });
            });


            // --- ANIMACIÓN DE SCROLL PRINCIPAL CON GSAP ---
            const sequenceTimeline = gsap.timeline({ 
                scrollTrigger: { 
                    trigger: ".sequence-container", 
                    start: "top top", 
                    end: "bottom bottom", 
                    scrub: 1.5 
                } 
            });
            ScrollTrigger.create({ 
                trigger: ".sequence-container", 
                pin: ".sticky-element" 
            });
            sequenceTimeline.to(".knockout-text-layer", { scale: 15, ease: "none" }, 0);
            sequenceTimeline.from(".background-image", { scale: 1.2, ease: "none" }, 0);
            sequenceTimeline.to(".knockout-text-layer", { opacity: 0 }, ">-0.5");
            
            // --- LÓGICA DE LA NUEVA GALERÍA CON AUTOPLAY ---
            const mainImage = document.getElementById('main-gallery-image');
            const thumbnails = document.querySelectorAll('.gallery-thumbnail');
            let currentIndex = 0;
            let galleryInterval;

            if (mainImage && thumbnails.length > 0) {
                const showSlide = (index) => {
                    if (index >= thumbnails.length || index < 0) return;
                    
                    currentIndex = index;
                    
                    thumbnails.forEach(t => t.classList.remove('active'));
                    thumbnails[currentIndex].classList.add('active');

                    const newSrc = thumbnails[currentIndex].querySelector('img').src;
                    mainImage.style.opacity = 0;
                    setTimeout(() => {
                        mainImage.src = newSrc;
                        mainImage.style.opacity = 1;
                    }, 300);
                };

                const nextSlide = () => {
                    const nextIndex = (currentIndex + 1) % thumbnails.length;
                    showSlide(nextIndex);
                };
                
                const startSlideshow = () => {
                    clearInterval(galleryInterval);
                    galleryInterval = setInterval(nextSlide, 4000); // CAMBIO: Tiempo reducido a 4 segundos
                };

                thumbnails.forEach((thumb, index) => {
                    thumb.addEventListener('click', function() {
                        showSlide(index);
                        startSlideshow(); // Reset interval on manual click
                    });
                });
                
                startSlideshow(); // Start on page load
            }


            // --- ANIMACIÓN DE APARICIÓN DE LAS TARJETAS ---
            // (Esta sección fue eliminada según las últimas instrucciones)

            // --- LÓGICA DEL INDICADOR DE SCROLL GLOBAL ---
            const scrollIndicator = document.querySelector('.global-scroll-indicator');
            if (scrollIndicator) {
                lenis.on('scroll', ({ scroll, limit }) => {
                    const atBottom = scroll >= limit - 50;
                    scrollIndicator.classList.toggle('hidden', atBottom);
                });
            }
            
            // --- SCRIPT DEL DIAGRAMA SANKEY RESPONSIVO CON D3.JS ---
            const sankeyContainer = document.querySelector('.chart-container');
            if (sankeyContainer) {
                const svgElement = d3.select("#alluvialChart");

                function drawSankeyChart() {
                    svgElement.selectAll("*").remove(); // Limpiar SVG anterior

                    const legendData = [ { name: "Actual Sales", color: "#14b8a6", columnId: 0 }, { name: "Quarterly Forecast", color: "#5eead4", columnId: 1 }, { name: "Forecasted Sales", color: "#d946ef", columnId: 2 } ];
                    const nodes = []; const links = []; const quarterNames = ["1Q", "2Q", "3Q", "4Q"];
                    nodes.push({ name: "Ventas Actuales", id: "VA", column: 0 });
                    const ventasActualesNodeIndex = 0;
                    const quarterNodeIndices = [];
                    quarterNames.forEach((quarterName) => {
                        nodes.push({ name: quarterName, id: quarterName, column: 1 }); quarterNodeIndices.push(nodes.length - 1);
                    });
                    nodes.push({ name: "Total Pronosticado", id: "TVP", column: 2 });
                    const totalVentasPronosticadasNodeIndex = nodes.length - 1;
                    const ventasPorTrimestreBase = 634 / quarterNames.length;
                    quarterNodeIndices.forEach((quarterNodeIndex) => {
                        const currentQuarterName = nodes[quarterNodeIndex].name;
                        const valorTrimestreConIncremento = Math.round(ventasPorTrimestreBase + (Math.floor(Math.random() * 60) + 15));
                        links.push({ source: ventasActualesNodeIndex, target: quarterNodeIndex, value: Math.round(ventasPorTrimestreBase), id: `link-va-${currentQuarterName}` });
                        links.push({ source: quarterNodeIndex, target: totalVentasPronosticadasNodeIndex, value: valorTrimestreConIncremento, id: `link-${currentQuarterName}-tvp` });
                    });

                    const isMobile = window.innerWidth <= 768;
                    const parentElement = svgElement.node().parentElement;
                    const baseWidth = parentElement.clientWidth;
                    
                    const margin = {
                        top: 30, right: isMobile ? 20 : 180,
                        bottom: isMobile ? 120 : 100,
                        left: isMobile ? 20 : 180
                    };

                    const baseHeight = isMobile ? 450 : 550;
                    const width = Math.max(50, baseWidth - margin.left - margin.right);
                    const height = Math.max(50, baseHeight - margin.top - margin.bottom);
                    
                    svgElement.attr("width", baseWidth).attr("height", baseHeight);
                    const svg = svgElement.append("g").attr("transform", `translate(${margin.left},${margin.top})`);
                    
                    const nodeWidthConfig = { wide: isMobile ? 30 : 65, narrow: isMobile ? 30 : 60 };
                    const sankey = d3.sankey().nodeWidth(nodeWidthConfig.wide).nodePadding(isMobile ? 15 : 30).nodeAlign(d3.sankeyJustify).extent([[1, 1], [width - 1, height - 1]]);
                    const {nodes: graphNodes, links: graphLinks} = sankey({ nodes: nodes.map(d => Object.assign({}, d)), links: links.map(d => Object.assign({}, d)) });

                    const linkGroup = svg.append("g").attr("class", "links-group");
                    linkGroup.selectAll(".sankey-link").data(graphLinks).enter().append("path").attr("class", "sankey-link").attr("d", d3.sankeyLinkHorizontal()).attr("stroke-width", d => Math.max(1.5, d.width));
                    
                    const node = svg.append("g").attr("class", "nodes").selectAll(".sankey-node").data(graphNodes).enter().append("g").attr("transform", d => `translate(${d.x0},${d.y0})`);
                    node.append("rect").attr("class", "node-rect-main").attr("height", d => Math.max(1, d.y1 - d.y0)).attr("width", d => d.x1 - d.x0).attr("fill", d => (legendData.find(item => item.columnId === d.column) || {}).color || "#ccc" ).attr("stroke", d => d3.color((legendData.find(item => item.columnId === d.column) || {}).color || "#ccc").darker(0.5));

                    if (!isMobile) {
                        node.append("text").attr("class", "node-name-label").attr("x", d => (d.x0 < width / 2) ? (d.x1 - d.x0 + 8) : -8).attr("y", d => (d.y1 - d.y0) / 2).attr("dy", "0.35em").attr("text-anchor", d => (d.x0 < width / 2) ? "start" : "end").text(d => d.column === 1 ? d.name : "");
                    }

                    node.append("text").attr("class", "node-value-label").style("font-size", isMobile ? "10px" : "13px").attr("x", d => (d.x1 - d.x0) / 2).attr("y", d => (d.y1 - d.y0) / 2).attr("dy", "0.35em").text(d => `$${Math.max(d3.sum(d.sourceLinks, l => l.value), d3.sum(d.targetLinks, l => l.value)).toLocaleString('es-ES')} MM`);

                    const legendGroup = svg.append("g").attr("class", "legend");
                    if (isMobile) {
                        legendGroup.attr("transform", `translate(0, ${height + 40})`);
                        const legendItem = legendGroup.selectAll(".legend-item").data(legendData).enter().append("g").attr("class", "legend-item").attr("transform", (d, i) => `translate(0, ${i * 25})`);
                        legendItem.append("rect").attr("x", 0).attr("y", -9).attr("width", 18).attr("height", 18).style("fill", d => d.color).attr("rx", 3).attr("ry", 3);
                        legendItem.append("text").attr("x", 24).attr("y", 0).text(d => d.name);
                    } else {
                        legendGroup.attr("transform", `translate(${(width - (legendData.length * 200)) / 2 + 30 }, ${height + margin.bottom / 2 })`);
                        const legendItem = legendGroup.selectAll(".legend-item").data(legendData).enter().append("g").attr("class", "legend-item").attr("transform", (d, i) => `translate(${i * 210}, 0)`);
                        legendItem.append("rect").attr("x", 0).attr("y", -9).attr("width", 18).attr("height", 18).style("fill", d => d.color).attr("rx", 3).attr("ry", 3);
                        legendItem.append("text").attr("x", 24).attr("y", 0).text(d => d.name);
                    }
                }

                drawSankeyChart();
                // Redibujar el gráfico si cambia el tamaño de la ventana
                let resizeTimer;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimer);
                    resizeTimer = setTimeout(drawSankeyChart, 250);
                });
            }
            
            // Lógica para cerrar el menú al hacer clic fuera
            document.addEventListener('click', (event) => {
                const isMenuOpen = menuOverlay.classList.contains('is-open');
                const isClickInsideMenu = menuOverlay.contains(event.target);
                const isClickOnTrigger = menuTrigger.contains(event.target);

                if (isMenuOpen && !isClickInsideMenu && !isClickOnTrigger) {
                    toggleMenu();
                }
            });
        });
    </script>
</body>
</html>
